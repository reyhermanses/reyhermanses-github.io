/*! For license information please see component-CAutocompleter-stories.ac2dd271.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkmakyo=self.webpackChunkmakyo||[]).push([[810],{"./src/component/CAutocompleter.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>CAutocompleter_stories});var react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const CAutocompleter=_ref=>{let{withSearch,suggestions,backgroundColor,multipleSelection}=_ref;const[query,setQuery]=(0,react.useState)(""),[filteredSuggestions,setFilteredSuggestions]=(0,react.useState)([]),[selectedSuggestions,setSelectedSuggestions]=(0,react.useState)([]),[showSuggestions,setShowSuggestions]=(0,react.useState)(!1),[activeSuggestionIndex,setActiveSuggestionIndex]=(0,react.useState)(0),[onSearch,setOnSearch]=(0,react.useState)(!1),node=(0,react.useRef)(null),inputRef=(0,react.useRef)(null);(0,react.useEffect)((()=>{const handleClickOutside=e=>{node.current&&!node.current.contains(e.target)&&(console.log("click outside"),setShowSuggestions(!1),setOnSearch(!1))};return document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}}),[]);const handleChange=e=>{withSearch||setOnSearch(!0);const userInput=e.target.value,filtered=suggestions.filter((suggestion=>suggestion.toLowerCase().indexOf(userInput.toLowerCase())>-1));setQuery(e.target.value),setFilteredSuggestions(filtered),setShowSuggestions(!0),setActiveSuggestionIndex(0)},toggleSelection=suggestion=>{selectedSuggestions.includes(suggestion)?setSelectedSuggestions(selectedSuggestions.filter((item=>item!==suggestion))):setSelectedSuggestions([...selectedSuggestions,suggestion])},handleClick=e=>{setQuery(e.currentTarget.innerText),setFilteredSuggestions([]),setShowSuggestions(!1);const selectedSuggestion=e.currentTarget.innerText;toggleSelection(selectedSuggestion)},handleClickMultiple=e=>{const selectedSuggestion=e.currentTarget.innerText;toggleSelection(selectedSuggestion)},handleKeyDown=e=>{if("Enter"===e.key)setQuery(filteredSuggestions[activeSuggestionIndex]),setFilteredSuggestions([]),setShowSuggestions(!1);else if("ArrowUp"===e.key){if(0===activeSuggestionIndex)return;setActiveSuggestionIndex(activeSuggestionIndex-1)}else if("ArrowDown"===e.key){if(activeSuggestionIndex+1===filteredSuggestions.length)return;setActiveSuggestionIndex(activeSuggestionIndex+1)}},highlightMatch=suggestion=>suggestion.split(new RegExp("(".concat(query,")"),"gi")).map(((part,index)=>part.toLowerCase()===query.toLowerCase()?(0,jsx_runtime.jsx)("span",{className:"font-bold text-blue-600",children:part},index):part));return(0,jsx_runtime.jsxs)("div",{ref:node,className:"flex items-center w-full",children:[(0,jsx_runtime.jsx)("label",{className:"block text-sm font-medium text-gray-700 mr-4 w-1/4",children:"Label"}),(0,jsx_runtime.jsxs)("div",{className:"relative w-3/4",children:[withSearch?(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)("input",{ref:inputRef,type:"text",className:"w-full pl-10 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-600",onChange:handleChange,onKeyDown:handleKeyDown,value:query,placeholder:"Search..."}),(0,jsx_runtime.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,jsx_runtime.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-4.99-4.99m-.02-4.99a7.5 7.5 0 11-13.47-4.76 7.5 7.5 0 018.91 8.91 7.5 7.5 0 014.75 13.47zM15 15l6 6"})})})]}):(0,jsx_runtime.jsxs)("div",{onClick:()=>{setOnSearch(!onSearch),inputRef.current&&inputRef.current.focus()},style:{backgroundColor:backgroundColor?"#5c4033":"#fff"},className:"border border-gray-300 rounded-md p-2 flex items-center justify-between",children:[(0,jsx_runtime.jsx)("div",{className:"cursor-pointer flex items-center",children:selectedSuggestions.map((suggestion=>(0,jsx_runtime.jsxs)("div",{className:"inline-flex items-center bg-red-500 text-white text-sm px-3 py-1 rounded-full",children:[suggestion,(0,jsx_runtime.jsx)("svg",{onClick:()=>(suggestion=>{setSelectedSuggestions(selectedSuggestions.filter((item=>item!==suggestion)))})(suggestion),className:"h-4 w-4 mr-1 cursor-pointer",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]},suggestion)))}),onSearch&&(0,jsx_runtime.jsx)("span",{className:"cursor-pointer flex items-center",children:(0,jsx_runtime.jsx)("svg",{className:"h-4 w-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})}),!onSearch&&(0,jsx_runtime.jsx)("span",{className:"cursor-pointer flex items-center",children:(0,jsx_runtime.jsx)("svg",{className:"h-4 w-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})})})]}),onSearch&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("br",{}),!withSearch&&(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)("input",{ref:inputRef,type:"text",className:"w-full pl-10 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-600",onChange:handleChange,onKeyDown:handleKeyDown,value:query,placeholder:"Search..."}),(0,jsx_runtime.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,jsx_runtime.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-4.99-4.99m-.02-4.99a7.5 7.5 0 11-13.47-4.76 7.5 7.5 0 018.91 8.91 7.5 7.5 0 014.75 13.47zM15 15l6 6"})})})]}),(0,jsx_runtime.jsx)("ul",{className:"absolute z-10 w-full mt-1 bg-white border rounded shadow-lg",children:multipleSelection?filteredSuggestions.map(((suggestion,index)=>{let className=" bg-blue-600 text-white";return(selectedSuggestions.includes(suggestion)||index===activeSuggestionIndex)&&(className+=" bg-gray-200"),(0,jsx_runtime.jsxs)("li",{onClick:handleClickMultiple,children:[(0,jsx_runtime.jsx)("input",{type:"checkbox",className:"mr-2",checked:selectedSuggestions.includes(suggestion),onChange:()=>toggleSelection(suggestion)}),highlightMatch(suggestion)]},suggestion)})):filteredSuggestions.map(((suggestion,index)=>{let className="bg-gray-200";return index===activeSuggestionIndex&&(className="bg-blue-600 text-white"),(0,jsx_runtime.jsx)("li",{onClick:handleClick,children:highlightMatch(suggestion)},suggestion)}))})]})]})]})},component_CAutocompleter=CAutocompleter;CAutocompleter.__docgenInfo={description:"",methods:[],displayName:"CAutocompleter",props:{suggestions:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},withSearch:{required:!0,tsType:{name:"boolean"},description:""},backgroundColor:{required:!1,tsType:{name:"boolean"},description:""},multipleSelection:{required:!1,tsType:{name:"boolean"},description:""}}};const CAutocompleter_stories={title:"Components/Autocompleter",component:component_CAutocompleter,argTypes:{withSearch:{control:"boolean"},backgroundColor:{control:"boolean"},multipleSelection:{control:"boolean"}}},Default=(args=>(0,jsx_runtime.jsx)(component_CAutocompleter,{...args})).bind({});Default.args={suggestions:["Option 1","Long Option2","Loong Option3","Looong Option4","Loooong Option5","Looooong Option6","Looooooong Option7"]},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => <CAutocompleter {...args} />",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var f=__webpack_require__("./node_modules/react/index.js"),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;for(b in void 0!==g&&(e=""+g),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(h=a.ref),a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l,exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")}}]);